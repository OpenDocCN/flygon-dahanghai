# 4.4 案例分析二：了解 Uniswap 和 AAVE @可达 Koda

说到 DeFi，就必须不得不说 Uniswap，它是截止目前，全球最大的去中心化交易所。其出现真正的颠覆了过去我们眼中传统的交易所。

这里为了我们更好的理解 Uniswap，我们先简单说说传统的中心化的交易所。

中心化交易所

目前全球最大的中心化交易所中，最著名的有两个，一个是 coinbase，一个是 binance（中文名币安）。

Coinbase 已于去年的 4 月份在纳斯达克上市，这是加密货币交易所第一个在证券市场上市的交易所。而 binance 则是目前全球交易量最大，用户数最多的一家交易所。

这类交易所我们统称为中心化交易所，即他们是被一个中心化的团体和组织所掌控。也因此，用户的资产在这些交易所存放，相当于委托他们保管。

同样，传统的交易所的买卖就必须要有一个角色就是做市商。对于传统的交易所，除了赚取正常的交易手续费外，做市商也会赚取一定的价差。

好，那么简单知道了传统的交易所后，我们今天来看 Uniswap。

自动做市商化（AMM）的去中心化交易所

Uniswap 被称之为开辟了自动做市商化（AMM）的去中心化交易所。

因为其是运行在以太坊区块链上的流动性协议，支持免信任的代币互换，也即是说，该交易所上的所有交易都是由智能合约自动执行的，用户无需依靠某个中介也无需信任某个第三方（传统交易所需要依靠做市商提供流动性）。

那么你可能就会问了，那么买卖双方怎么交易呢？这里有一个角色是专门干这件事的，叫做 liquidity provider（流动性提供者简称 LP）。即我们可以将自己的代币资产存入到 Uniswap 中提供流动性。

在 Uniswap 中，人人都可以成为 LP，而且成为 LP 还可以赚取 0.3% 的交易手续费（过去这部分可是被传统的中心化交易所做市商赚走了），今天在 Uniswap 上人人都可以分一杯羹。

在传统交易所中，有一个订单薄系统，每个资产的价格由最高买家和最低卖价决定。而在 Uniswap 中这种买与卖的供求关系则由一套数学方程式来代替：x*y=K。这里 x 和 y 分别代表的是我们提供的一组池子中两个代币的不同数量，而 K 则是一个恒定值。

这里我就不具体解释这个公式的具体计算方法和使用方法了，感兴趣的可以浏览这个视频，这里有详细说明：[哔哩哔哩：AMM 自动做市商和流动池类型介绍 无常损失 Uniswap Curve Balancer Bancor](https://b23.tv/hf9imTH)

也是因为这套 AMM 自动做市商机制的出现，让 Uniswap 成为行业截止现在为止的交易量最大的去中心化交易所。

去中心化交易所的优势

因为去中心化交易所可以让用户不用担心自己的资产安全问题，所以从推出后，对于安全级别要求较高的用户，则非常喜欢 Uniswap 这一类交易所。

另外，Uniswap 还有一个很大的优势，就是人人都可以在其上线任意代币的交易对，这是大部分交易所所不具备的优势，因为中心化交易所上线代币交易对是需要较严格的审查以及一定的上币费用。而 Uniswap 则全部不需要。

在近期一周左右时间，因为全球前三的中心化交易所 FTX 暴雷，使得传统的中心化交易所出现了巨大的信任危机，而与此同时，去中心化交易所则得到了更多用户的青睐，截止我发稿的时候。Uniswap 上的用户再次突破前高。

接下来我们说说 DeFi 中又一个非常重要的应用：借贷协议。

借贷协议在这轮牛市中（2020 - 2021）也是大放异彩，原因很简单，因为其简易的借贷机制，让更多有资金需求，有杠杆需求的投资者利用这些平台进行抵押借贷。

在以太坊生态中，目前最知名的借贷协议有：MakerDAO、Compound 以及 Aave 了。

这里我们以 Aave 为例。

Aave：去中心化借贷协议

Aave 是一个去中心化的借贷系统，允许用户在不需要中间人的情况下借入、借出和赚取加密资产的利息。Aave 在以太坊区块链上运行，并使用智能合约系统进行自动化运行。因此，他们的用户不必信任某个机构或个人来处理他们的资金。

这里我用一个实用的场景来举例大家可能更容易理解。

比如在我们生活中，如果我们今天需要一笔较大额度的贷款，一般情况我们会怎么做呢？我们会找到银行或者相关的贷款机构。然后我们提供我们的房产证等相关证件，这个时候银行或者贷款机构会根据我们房子的价值进行评估以确定我们能贷款多少额度。

假设我的房子目前的市场价值 100 万，那么一般情况银行会给你审批不超过房子价值 70% 的贷款，也就是 70 万。

也就是说，从贷款日开始计息，假设借贷一年时间，假设利率是 10% 的话，那么年底还贷款的时候，就连本带息还 70 + 7 = 77 万。

这就是我们传统的贷款机构的一般贷款流程。

Aave 的借贷流程

在去中心化的世界中，有了 Aave 这样的工具，其实借贷就非常的简单了。不一样的是，我们抵押的是我们 Web3 世界中的可抵押的资产。对这里可抵押的资产是有限定的，也就是只有限定的一些数字资产是可以抵押的。

比如我现在手里有 10 个 BTC，但是我现在着急需要现金，怎么办？现在将我的 BTC 在二级市场进行售卖，此时价格只有 16500 美金，太便宜了，我觉得非常不划算，我觉得 3 年后至少可以到一枚 10 万美金，我不想这么早的卖掉。这个时候，aave 借贷工具就可以帮忙了。

这个时候，我们只需要将我们的 BTC 转换为 wBTC（和 BTC 1:1 兑换），然后将 10wBTC 通过 aave 进行抵押，这个时候我就可以借贷超过 80% 抵押额度的 usdt 出来（甚至可以超过 80%，只是为了不被轻易清算掉，所以一般我们会控制在 80% 以下）。

同样，从我借贷那一刻开始，系统也开始给我计息，而且一般来说，没有借贷的时间要求，你什么时候还都可以。还的时候，系统会自动为你结算你需要还的利息。一般利息要么通过平台币结算要么通过 usdt 结算（可以自由选择）。

那么这个时候，可能会有人说了，如果有一天我的抵押品因为市场再次下跌不够我借出的金额会发生什么呢？这个时候会进行清算。一般来说，当你的抵押品达到你的借贷金额的 95% 的时候系统就会提醒你，要么增加抵押品，要么归还借贷金额。如果你没有来得及增加抵押品或者归还借款，系统就会发生清算。即平台自动将你的抵押品在系统进行卖出。

因为清算的金额会低于你抵押的金额（会收取较高的手续费），所以一般我们不会主动等到我们的抵押品被清算。

这个时候你可能会问，那我借贷的资金是谁的呢？

因为这是一个借贷平台，其实你可以把他理解成为一个借贷撮合平台，也可以看作是 p2p。只是这个 p2p 平台是通过一套智能合约系统运行着。会自动执行借贷双方的借贷合同。

你可能会听过这么一句话，Web3 中有些钱是大风刮来的。哈哈，这个梗在 Web3 世界中会经常被人提起。其实在 defi 世界中的确是有很多这样的实际案例。

在 2020 年，很多的借贷协议还不被很多人所知，这些借贷平台为了让更多的用户知道他们，设计了一套代币经济模型。这些经济模型的确让很多人感受到了什么叫钱是大风刮来的。

无论是 makerdao、aave、compound 刚开始的时候，你借贷的金额不仅不用付利息，而且还给你奖励。

对，你没听错，还给你倒贴。准确的讲不是没有利息，而是利息大幅低于该平台给你的代币奖励。比如你在 compound 进行借贷，虽然会产生利息，但是平台因为你使用它的协议，他会给你奖励它的代币 $COMP， Aave 平台则是奖励 $AAVE 代币。而这些代币在 2020 年到 2021 年，有的涨了几十倍，有的涨了上百倍。

所以，这些涨价后的代币价值就远远大于当时的借贷利息了。而在 defi 中，这样的情况则非常的普遍。

好了，基本上借贷协议就到这里可以告一段落了。

当然在 defi 世界除了这些之外，还有很多其他的协议，比如 YFI、LINK 等，都曾经在 defi 领域中大放异彩，大家感兴趣的话，可以在 Google 上搜索相关的介绍，这里因为篇幅原因我们就不详细介绍了。

友情链接：

Uniswap 官网：[`uniswap.org/`](https://uniswap.org/)

Aave 官网：[`aave.com/`](https://aave.com/)

![](img/d2c5514a55bab876d48116f023b6bdd6.png)